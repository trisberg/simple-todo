---
applications:
  - name: simple-todo-dev
    memory: 1G
    instances: 1
    path: target/simple-todo-0.0.1-SNAPSHOT.jar
    buildpacks:
      - java_buildpack_offline
    stack: cflinuxfs4
    env:
      SPRING_PROFILES_ACTIVE: dev
      JBP_CONFIG_SPRING_AUTO_RECONFIGURATION: '{enabled: false}'
      JBP_CONFIG_OPEN_JDK_JRE: '{ jre: { version: 21.+ } }'
      SERVER_PORT: 8080
    routes:
      - route: simple-todo-dev.apps.dhaka.cf-app.com
    services: []
    health-check-type: http
    health-check-http-endpoint: /actuator/health
    timeout: 180
    
  - name: simple-todo-prod
    memory: 2G
    instances: 2
    path: target/simple-todo-0.0.1-SNAPSHOT.jar
    buildpacks:
      - java_buildpack_offline
    stack: cflinuxfs4
    env:
      SPRING_PROFILES_ACTIVE: prod
      JBP_CONFIG_SPRING_AUTO_RECONFIGURATION: '{enabled: false}'
      JBP_CONFIG_OPEN_JDK_JRE: '{ jre: { version: 21.+ } }'
      SERVER_PORT: 8080
      # Database connection will be provided by bound service
      # Override these with actual service credentials
      DATABASE_URL: # Will be set by bound PostgreSQL service
      DATABASE_USERNAME: # Will be set by bound PostgreSQL service  
      DATABASE_PASSWORD: # Will be set by bound PostgreSQL service
    routes:
      - route: simple-todo.apps.dhaka.cf-app.com
    services:
      - simple-todo-postgres
    health-check-type: http
    health-check-http-endpoint: /actuator/health
    timeout: 300
